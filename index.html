<html>
<head>
    <title>JSON化によるLISPの実装</title>
    <link rel="stylesheet" type="text/css" href="styles.css">
    <meta charset="UTF-8">
</head>
<body>
    <h1>LISP広場</h1>
    <p>一通りの機能を実装しましたが、何か不具合がございましたらお知らせください。</p>
    <textarea id ="input" rows="40" cols="80"></textarea>
    <input type="button" value="Run" onclick="document.getElementById('output').value = ''; runLisp(document.getElementById('input').value)"/>
    <br>
    <textarea id ="output" rows="40" cols="80"></textarea>
    <script src="JSLisp.js"></script>
    <script>
        onload = function() {
            document.getElementById('input').value = `
(cout output "変数定義と出力")
(def x 100) 
(cout output x)
(cout output "関数定義と呼び出し")
(func add (a b) 
    (+ a b)
)
(cout output (add 10 20))
(cout output "１～ｎまでの和")
(func sum (n)
  (def s 0)
  (def i 1)
  (while (< i (+ n 1))
    (set s (+ s i))
    (set i (+ i 1)))
  (return s))
(cout output (sum 100))
(cout output "a b 比較して小さいほう判定")
(func min(a b)
  (if (< a b)
    (return a)
    (return b)))
(cout output (min 10 20))
(cout output (min 30 20))
(cout output (min x 50))
(cout output "変数スコープ")
(def a 0)
(set a (min 10 20))
(cout output a)

(cout output "再帰ルーチン(フィボナッチ)")
(func rec(a b n)
  (if (> n 0)
    (
      (cout output a)
      (set b  (+ a b))
      (set a  (- b a))
      (set n  (- n 1))
      (rec a b n)
    )
  )
)

(rec 0 1 15)

(cout output "リスト操作")
(def mylist '(1 2 3 4)) 
(cout output (car mylist))
(cout output (cdr mylist))
(cout output (cons 0 mylist))
(cout output (length mylist))
(cout output (append mylist '(5 6)))

(def TOWNS '(LONDON READING OXFORD))
(cout output (car TOWNS))
(cout output (cdr TOWNS))

(def alpha '( '( '( A B) C) D ) )

(cout output (car alpha))
(cout output (car (car alpha)))
(cout output (cdr alpha))
(set a (cdr alpha))
(cout output (car a))
`;
        };
    </script>
</body>

</html>